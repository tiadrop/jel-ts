/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./demo/index.ts":
/*!***********************!*\
  !*** ./demo/index.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar progressBar_1 = __webpack_require__(/*! ../examples/progressBar */ \"./examples/progressBar/index.ts\");\nvar toggleButton_1 = __webpack_require__(/*! ../examples/toggleButton */ \"./examples/toggleButton/index.ts\");\nvar index_1 = __webpack_require__(/*! ../src/index */ \"./src/index.ts\"); // from \"@xtia/jel\"\n// wrap body\nvar body = (0, index_1.$)(document.body);\n// toggle button\nbody.append(index_1.$.h2(\"Toggle button\"), (0, toggleButton_1.toggleButton)({\n    caption: \"Toggle theme\",\n    classes: \"theme-toggle\",\n    state: true,\n    on: {\n        change: function (event) { return body.classes.toggle(\"dark-mode\", event.state); },\n    }\n}));\nindex_1.$.input({\n    type: \"checkbox\",\n});\nvar superbutton = function (spec) {\n    var _a;\n    var timesClicked = 0;\n    var clickEvent = (0, index_1.createEventSource)((_a = spec.on) === null || _a === void 0 ? void 0 : _a.click);\n    var button = index_1.$.button({\n        on: {\n            click: function () {\n                timesClicked++;\n                clickEvent.emit({ totalClicks: timesClicked });\n            },\n        }\n    });\n    var label = index_1.$.label(spec.caption);\n    var main = index_1.$.div({\n        classes: [\"superbutton\", spec.classes],\n        content: [\n            button,\n            label,\n        ]\n    });\n    return (0, index_1.createEntity)(main, {\n        get caption() { return label.content; },\n        set caption(v) { label.content = v; },\n        get timesClicked() { return timesClicked; },\n        events: {\n            click: clickEvent.emitter\n        }\n    });\n};\n// using your new component:\nvar mySuperbutton = superbutton({\n    caption: \"Click ☝️\",\n    on: {\n        click: function (event) { return mySuperbutton.caption = \"clicks: \".concat(event.totalClicks); }\n    }\n});\nbody.append([\n    index_1.$.h2(\"Custom\"),\n    mySuperbutton,\n]);\n// progress bar\nvar demoProgressPlain = (0, progressBar_1.progressBar)({});\nvar demoProgressRed = (0, progressBar_1.progressBar)({ classes: \"red-fg\" });\n// simple components can be simple functions\nvar progressDeltaButton = function (delta) { return index_1.$.button({\n    content: index_1.$.code([\"progressBar.value \".concat(delta >= 0 ? \"+\" : \"-\", \"= \").concat(Math.abs(delta))]),\n    on: {\n        click: function () {\n            demoProgressPlain.value += delta;\n            demoProgressRed.value = demoProgressPlain.value;\n        }\n    }\n}); };\nbody.append([\n    index_1.$.h2(\"Progress\"),\n    index_1.$.blockquote([\n        index_1.$.pre(\"progressBar()\"),\n        demoProgressPlain,\n        index_1.$.pre(\"progressBar({ appearance: \\\"bar\\\", classes: \\\"red-fg\\\" })\"),\n        demoProgressRed,\n    ]),\n    index_1.$.div([\n        progressDeltaButton(-.05),\n        progressDeltaButton(.06),\n    ]),\n]);\n// a simpler component can just be a function:\nvar icon = function (iconId) { return index_1.$.span({\n    classes: [\"icon\", \"icon-\".concat(iconId)],\n}); };\nvar button = index_1.$.button({\n    content: [icon(\"checkmark\"), \" Accept\"],\n});\n\n\n//# sourceURL=webpack://jel-ts/./demo/index.ts?");

/***/ }),

/***/ "./examples/progressBar/index.ts":
/*!***************************************!*\
  !*** ./examples/progressBar/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.progressBar = void 0;\nvar index_1 = __webpack_require__(/*! ../../src/index */ \"./src/index.ts\");\nvar progressBar = function (spec) {\n    var _a;\n    if (spec === void 0) { spec = 0; }\n    if (typeof spec == \"number\")\n        spec = {};\n    if (spec.value === undefined)\n        spec.value = 0;\n    var value = spec.value;\n    var inner = index_1.$.div({\n        classes: \"jel-progress-inner\",\n        cssVariables: {\n            fill: value,\n        }\n    });\n    var api = {\n        get value() { return value; },\n        set value(v) {\n            value = v;\n            inner.setCSSVariable(\"fill\", v);\n        }\n    };\n    return (0, index_1.createEntity)(index_1.$.div({\n        classes: [\"jel-progress\", (_a = spec.classes) !== null && _a !== void 0 ? _a : []],\n        content: inner,\n    }), api);\n};\nexports.progressBar = progressBar;\n\n\n//# sourceURL=webpack://jel-ts/./examples/progressBar/index.ts?");

/***/ }),

/***/ "./examples/toggleButton/index.ts":
/*!****************************************!*\
  !*** ./examples/toggleButton/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.toggleButton = toggleButton;\nvar index_1 = __webpack_require__(/*! ../../src/index */ \"./src/index.ts\");\nfunction toggleButton(options) {\n    var _a;\n    if (options === void 0) { options = {}; }\n    var changeEvent = (0, index_1.createEventSource)((_a = options.on) === null || _a === void 0 ? void 0 : _a.change);\n    var state = !!options.state;\n    var button = index_1.$.button({\n        classes: [\n            \"toggle-button\",\n            options.classes,\n            { \"toggle-button-on\": state }\n        ],\n        content: options.caption,\n        on: {\n            click: function () {\n                state = !state;\n                button.classes.toggle(\"toggle-button-on\", state);\n                changeEvent.emit({ state: state });\n            },\n        }\n    });\n    return (0, index_1.createEntity)(button, {\n        get state() { return state; },\n        set state(v) {\n            button.classes.toggle(\"toggle-button-on\", v);\n            state = v;\n        }\n    });\n}\n\n\n//# sourceURL=webpack://jel-ts/./examples/toggleButton/index.ts?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createEventSource = exports.createEntity = exports.$ = void 0;\nvar element_1 = __webpack_require__(/*! ./internal/element */ \"./src/internal/element.ts\");\nObject.defineProperty(exports, \"$\", ({ enumerable: true, get: function () { return element_1.$; } }));\nvar util_1 = __webpack_require__(/*! ./internal/util */ \"./src/internal/util.ts\");\nObject.defineProperty(exports, \"createEntity\", ({ enumerable: true, get: function () { return util_1.createEntity; } }));\nvar emitter_1 = __webpack_require__(/*! ./internal/emitter */ \"./src/internal/emitter.ts\");\nObject.defineProperty(exports, \"createEventSource\", ({ enumerable: true, get: function () { return emitter_1.createEventSource; } }));\n\n\n//# sourceURL=webpack://jel-ts/./src/index.ts?");

/***/ }),

/***/ "./src/internal/element.ts":
/*!*********************************!*\
  !*** ./src/internal/element.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.$ = void 0;\nvar proxy_1 = __webpack_require__(/*! ./proxy */ \"./src/internal/proxy.ts\");\nvar util_1 = __webpack_require__(/*! ./util */ \"./src/internal/util.ts\");\nvar elementWrapCache = new WeakMap();\nvar recursiveAppend = function (parent, c) {\n    if (c === null)\n        return;\n    if (Array.isArray(c)) {\n        c.forEach(function (item) { return recursiveAppend(parent, item); });\n        return;\n    }\n    if ((0, util_1.isJelEntity)(c)) {\n        recursiveAppend(parent, c[util_1.entityDataSymbol].dom);\n        return;\n    }\n    if (typeof c == \"number\")\n        c = c.toString();\n    parent.append(c);\n};\nfunction createElement(tag, descriptor) {\n    if (descriptor === void 0) { descriptor = {}; }\n    if ((0, util_1.isContent)(descriptor))\n        return createElement(tag, {\n            content: descriptor,\n        });\n    var domElement = document.createElement(tag);\n    var ent = getWrappedElement(domElement);\n    var applyClasses = function (classes) {\n        if (Array.isArray(classes)) {\n            return classes.forEach(function (c) { return applyClasses(c); });\n        }\n        if (typeof classes == \"string\") {\n            classes.trim().split(/\\s+/).forEach(function (c) { return ent.classes.add(c); });\n            return;\n        }\n        if (classes === undefined)\n            return;\n        Object.entries(classes).forEach(function (_a) {\n            var className = _a[0], state = _a[1];\n            if (state)\n                applyClasses(className);\n        });\n    };\n    applyClasses(descriptor.classes || []);\n    [\"value\", \"src\", \"href\", \"width\", \"height\", \"type\", \"name\"].forEach(function (prop) {\n        if (descriptor[prop] !== undefined)\n            domElement.setAttribute(prop, descriptor[prop]);\n    });\n    // attribs.value / attribs.src / attribs.href override descriptor.*\n    if (descriptor.attribs) {\n        Object.entries(descriptor.attribs).forEach(function (_a) {\n            var k = _a[0], v = _a[1];\n            if (v === false) {\n                return;\n            }\n            domElement.setAttribute(k, v === true ? k : v);\n        });\n    }\n    if (descriptor.content !== undefined)\n        recursiveAppend(domElement, descriptor.content);\n    if (descriptor.style) {\n        ent.style(descriptor.style);\n    }\n    if (descriptor.cssVariables) {\n        ent.setCSSVariable(descriptor.cssVariables);\n    }\n    if (descriptor.on) {\n        Object.entries(descriptor.on).forEach(function (_a) {\n            var eventName = _a[0], handler = _a[1];\n            return ent.events[eventName].apply(handler);\n        });\n    }\n    return ent;\n}\n;\nexports.$ = new Proxy(createElement, {\n    apply: function (create, _, _a) {\n        var _b;\n        var selectorOrTagName = _a[0], contentOrDescriptor = _a[1];\n        if (selectorOrTagName instanceof HTMLElement)\n            return getWrappedElement(selectorOrTagName);\n        var tagName = ((_b = selectorOrTagName.match(/^[^.#]*/)) === null || _b === void 0 ? void 0 : _b[0]) || \"\";\n        if (!tagName)\n            throw new Error(\"Invalid tag\");\n        var matches = selectorOrTagName.slice(tagName.length).match(/[.#][^.#]+/g);\n        var classes = {};\n        var descriptor = {\n            classes: classes,\n            content: contentOrDescriptor,\n        };\n        matches === null || matches === void 0 ? void 0 : matches.forEach(function (m) {\n            var value = m.slice(1);\n            if (m[0] == \".\") {\n                classes[value] = true;\n            }\n            else {\n                descriptor.attribs = { id: value };\n            }\n        });\n        return create(tagName, descriptor);\n    },\n    get: function (create, tagName) {\n        return function (descriptorOrContent) {\n            return create(tagName, descriptorOrContent);\n        };\n    }\n});\nfunction getWrappedElement(element) {\n    var _a;\n    if (!elementWrapCache.has(element)) {\n        var setCSSVariable_1 = function (k, v) {\n            if (v === null) {\n                element.style.removeProperty(\"--\" + k);\n            }\n            else {\n                element.style.setProperty(\"--\" + k, v);\n            }\n        };\n        var domEntity_1 = (_a = {},\n            _a[util_1.entityDataSymbol] = {\n                dom: element,\n            },\n            Object.defineProperty(_a, \"element\", {\n                get: function () { return element; },\n                enumerable: false,\n                configurable: true\n            }),\n            _a.on = function (eventId, handler) {\n                element.addEventListener(eventId, function (eventData) {\n                    handler.call(domEntity_1, eventData);\n                });\n            },\n            _a.append = function () {\n                var content = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    content[_i] = arguments[_i];\n                }\n                recursiveAppend(element, content);\n            },\n            _a.remove = function () { return element.remove(); },\n            _a.setCSSVariable = function (variableNameOrTable, value) {\n                if (typeof variableNameOrTable == \"object\") {\n                    Object.entries(variableNameOrTable).forEach(function (_a) {\n                        var k = _a[0], v = _a[1];\n                        return setCSSVariable_1(k, v);\n                    });\n                    return;\n                }\n                setCSSVariable_1(variableNameOrTable, value);\n            },\n            _a.qsa = function (selector) {\n                var results = [];\n                element.querySelectorAll(selector).forEach(function (el) { return results.push(el instanceof HTMLElement ? getWrappedElement(el) : el); });\n                return results;\n            },\n            _a.getRect = function () { return element.getBoundingClientRect(); },\n            _a.focus = function () { return element.focus(); },\n            _a.blur = function () { return element.blur(); },\n            _a.select = function () { return element.select(); },\n            _a.play = function () { return element.play(); },\n            _a.pause = function () { return element.pause(); },\n            _a.getContext = function (mode, options) {\n                return element.getContext(mode, options);\n            },\n            Object.defineProperty(_a, \"content\", {\n                get: function () {\n                    return [].slice.call(element.children).map(function (child) {\n                        if (child instanceof HTMLElement)\n                            return getWrappedElement(child);\n                        return child;\n                    });\n                },\n                set: function (v) {\n                    element.innerHTML = \"\";\n                    recursiveAppend(element, v);\n                },\n                enumerable: false,\n                configurable: true\n            }),\n            _a.attribs = new Proxy(element, proxy_1.attribsProxy),\n            Object.defineProperty(_a, \"innerHTML\", {\n                get: function () {\n                    return element.innerHTML;\n                },\n                set: function (v) {\n                    element.innerHTML = v;\n                },\n                enumerable: false,\n                configurable: true\n            }),\n            Object.defineProperty(_a, \"value\", {\n                get: function () {\n                    return element.value;\n                },\n                set: function (v) {\n                    element.value = v;\n                },\n                enumerable: false,\n                configurable: true\n            }),\n            Object.defineProperty(_a, \"href\", {\n                get: function () {\n                    return element.href;\n                },\n                set: function (v) {\n                    element.href = v;\n                },\n                enumerable: false,\n                configurable: true\n            }),\n            Object.defineProperty(_a, \"src\", {\n                get: function () {\n                    return element.src;\n                },\n                set: function (v) {\n                    element.src = v;\n                },\n                enumerable: false,\n                configurable: true\n            }),\n            Object.defineProperty(_a, \"width\", {\n                get: function () {\n                    return element.width;\n                },\n                set: function (v) {\n                    element.width = v;\n                },\n                enumerable: false,\n                configurable: true\n            }),\n            Object.defineProperty(_a, \"height\", {\n                get: function () {\n                    return element.height;\n                },\n                set: function (v) {\n                    element.height = v;\n                },\n                enumerable: false,\n                configurable: true\n            }),\n            Object.defineProperty(_a, \"currentTime\", {\n                get: function () {\n                    return element.currentTime;\n                },\n                set: function (v) {\n                    element.currentTime = v;\n                },\n                enumerable: false,\n                configurable: true\n            }),\n            Object.defineProperty(_a, \"paused\", {\n                get: function () {\n                    return element.paused;\n                },\n                enumerable: false,\n                configurable: true\n            }),\n            Object.defineProperty(_a, \"name\", {\n                get: function () {\n                    return element.getAttribute(\"name\");\n                },\n                set: function (v) {\n                    if (v === null) {\n                        element.removeAttribute(\"name\");\n                    }\n                    else {\n                        element.setAttribute(\"name\", v);\n                    }\n                },\n                enumerable: false,\n                configurable: true\n            }),\n            _a.style = new Proxy(function () { return element.style; }, proxy_1.styleProxy),\n            _a.classes = element.classList,\n            _a.events = new Proxy(element, proxy_1.eventsProxy),\n            _a);\n        elementWrapCache.set(element, domEntity_1);\n    }\n    return elementWrapCache.get(element);\n}\n\n\n//# sourceURL=webpack://jel-ts/./src/internal/element.ts?");

/***/ }),

/***/ "./src/internal/emitter.ts":
/*!*********************************!*\
  !*** ./src/internal/emitter.ts ***!
  \*********************************/
/***/ (function(__unused_webpack_module, exports) {

eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EventEmitter = exports.Emitter = void 0;\nexports.createEventSource = createEventSource;\nexports.createListenable = createListenable;\nvar Emitter = /** @class */ (function () {\n    function Emitter(onListen) {\n        this.onListen = onListen;\n    }\n    Emitter.prototype.transform = function (handler) {\n        var parentUnsubscribe = null;\n        var parentListen = this.onListen;\n        var _a = createListenable(function () { return parentUnsubscribe = parentListen(function (value) {\n            handler(value, emit);\n        }); }, function () {\n            parentUnsubscribe();\n            parentUnsubscribe = null;\n        }), emit = _a.emit, listen = _a.listen;\n        return listen;\n    };\n    /**\n     * Compatibility alias for `apply()` - registers a function to receive emitted values\n     * @param handler\n     * @returns A function to deregister the handler\n     */\n    Emitter.prototype.listen = function (handler) {\n        return this.onListen(handler);\n    };\n    /**\n     * Registers a function to receive emitted values\n     * @param handler\n     * @returns A function to deregister the handler\n     */\n    Emitter.prototype.apply = function (handler) {\n        return this.onListen(handler);\n    };\n    /**\n     * Creates a chainable emitter that applies arbitrary transformation to values emitted by its parent\n     * @param mapFunc\n     * @returns Listenable: emits transformed values\n     */\n    Emitter.prototype.map = function (mapFunc) {\n        var listen = this.transform(function (value, emit) { return emit(mapFunc(value)); });\n        return new Emitter(listen);\n    };\n    /**\n     * Creates a chainable emitter that selectively forwards emissions along the chain\n     * @param check Function that takes an emitted value and returns true if the emission should be forwarded along the chain\n     * @returns Listenable: emits values that pass the filter\n     */\n    Emitter.prototype.filter = function (check) {\n        var listen = this.transform(function (value, emit) { return check(value) && emit(value); });\n        return new Emitter(listen);\n    };\n    /**\n     * Creates a chainable emitter that discards emitted values that are the same as the last value emitted by the new emitter\n     * @param compare Optional function that takes the previous and next values and returns true if they should be considered equal\n     *\n     * If no `compare` function is provided, values will be compared via `===`\n     * @returns Listenable: emits non-repeating values\n     */\n    Emitter.prototype.dedupe = function (compare) {\n        var previous = null;\n        var listen = this.transform(function (value, emit) {\n            if (!previous || (compare\n                ? !compare(previous.value, value)\n                : (previous.value !== value))) {\n                emit(value);\n                previous = { value: value };\n            }\n        });\n        return new Emitter(listen);\n    };\n    /**\n     * Creates a chainable emitter that mirrors emissions from the parent emitter, invoking the provided callback `cb` as a side effect for each emission.\n     *\n     * The callback `cb` is called exactly once per parent emission, regardless of how many listeners are attached to the returned emitter.\n     * All listeners attached to the returned emitter receive the same values as the parent emitter.\n     *\n     * *Note*, the side effect `cb` is only invoked when there is at least one listener attached to the returned emitter\n     *\n     * @param cb A function to be called as a side effect for each value emitted by the parent emitter.\n     * @returns A new emitter that forwards all values from the parent, invoking `cb` as a side effect.\n     */\n    Emitter.prototype.tap = function (cb) {\n        var listen = this.transform(function (value, emit) {\n            cb(value);\n            emit(value);\n        });\n        return new Emitter(listen);\n    };\n    /**\n     * Immediately passes this emitter to a callback and returns this emitter\n     *\n     * Allows branching without breaking a composition chain\n     *\n     * @example\n     * ```ts\n     * range\n     *   .tween(\"0%\", \"100%\")\n     *   .fork(branch => branch\n     *       .map(s => `Loading: ${s}`)\n     *       .apply(s => document.title = s)\n     *   )\n     *   .apply(v => progressBar.style.width = v);\n     * ```\n     * @param cb\n     */\n    Emitter.prototype.fork = function (cb) {\n        cb(this);\n        return this;\n    };\n    return Emitter;\n}());\nexports.Emitter = Emitter;\nvar EventEmitter = /** @class */ (function (_super) {\n    __extends(EventEmitter, _super);\n    function EventEmitter(listen) {\n        return _super.call(this, listen) || this;\n    }\n    EventEmitter.prototype.debounce = function (ms) {\n        var reset = null;\n        var listen = this.transform(function (value, emit) {\n            reset === null || reset === void 0 ? void 0 : reset();\n            var timeout = setTimeout(function () {\n                reset = null;\n                emit(value);\n            }, ms);\n            reset = function () {\n                reset = null;\n                clearTimeout(timeout);\n            };\n        });\n        return new EventEmitter(listen);\n    };\n    EventEmitter.prototype.throttle = function (ms) {\n        var lastTime = 0;\n        var listen = this.transform(function (value, emit) {\n            var now = Date.now();\n            if (now < lastTime + ms) {\n                lastTime = now;\n                emit(value);\n            }\n        });\n        return new EventEmitter(listen);\n    };\n    EventEmitter.prototype.batch = function (ms) {\n        var items = [];\n        var active = false;\n        var listen = this.transform(function (value, emit) {\n            items.push(value);\n            if (!active) {\n                active = true;\n                setTimeout(function () {\n                    emit(items);\n                    items = [];\n                    active = false;\n                }, ms);\n            }\n        });\n        return new EventEmitter(listen);\n    };\n    EventEmitter.prototype.filter = function (check) {\n        var listen = this.transform(function (value, emit) { return check(value) && emit(value); });\n        return new EventEmitter(listen);\n    };\n    EventEmitter.prototype.once = function () {\n        var _a = createListenable(), emit = _a.emit, listen = _a.listen;\n        var unsub = this.apply(function (v) {\n            unsub();\n            emit(v);\n        });\n        return new EventEmitter(listen);\n    };\n    EventEmitter.prototype.scan = function (updater, initial) {\n        var state = initial;\n        var listen = this.transform(function (value, emit) {\n            state = updater(state, value);\n            emit(state);\n        });\n        return new EventEmitter(listen);\n    };\n    EventEmitter.prototype.buffer = function (count) {\n        var buffer = [];\n        var listen = this.transform(function (value, emit) {\n            buffer.push(value);\n            if (buffer.length >= count) {\n                emit(buffer);\n                buffer = [];\n            }\n        });\n        return new EventEmitter(listen);\n    };\n    EventEmitter.prototype.take = function (limit) {\n        var _a = createListenable(), emit = _a.emit, listen = _a.listen;\n        var count = 0;\n        var unsub = this.apply(function (v) {\n            if (count < limit) {\n                emit(v);\n                count++;\n                if (count >= limit) {\n                    unsub();\n                }\n            }\n        });\n        return new EventEmitter(listen);\n    };\n    EventEmitter.prototype.tap = function (cb) {\n        var listen = this.transform(function (value, emit) {\n            cb(value);\n            emit(value);\n        });\n        return new EventEmitter(listen);\n    };\n    EventEmitter.prototype.takeUntil = function (notifier) {\n        var _a = createListenable(), emit = _a.emit, listen = _a.listen;\n        var unsub = this.apply(function (v) {\n            emit(v);\n        });\n        var unsubNotifier = notifier.apply(function () {\n            unsub();\n            unsubNotifier();\n        });\n        return new Emitter(listen);\n    };\n    return EventEmitter;\n}(Emitter));\nexports.EventEmitter = EventEmitter;\n/**\n * Creates a linked Emitter and emit() pair\n * @example\n * ```ts\n * function createForm(options: { onsubmit?: (data: FormData) => void }) {\n *   const submitEvents = createEventSource(options.onsubmit);\n *   const form = $.form({\n *     on: {\n *       submit: (e) => {\n *         e.preventDefault();\n *         const data = new FormData(e.target);\n *         submitEvents.emit(data); // emit when form is submitted\n *       }\n *     }\n *   });\n *\n *   return createEntity(form, {\n *     events: {\n *       submit: submitEvents.emitter\n *     }\n *   })\n * }\n *\n * const form = createForm({\n *   onsubmit: (data) => handleSubmission(data)\n * });\n * ```\n *\n * @param initialHandler Optional listener automatically applied to the resulting Emitter\n * @returns\n */\nfunction createEventSource(initialHandler) {\n    var _a = createListenable(), emit = _a.emit, listen = _a.listen;\n    if (initialHandler)\n        listen(initialHandler);\n    return {\n        emit: emit,\n        emitter: new EventEmitter(listen)\n    };\n}\nfunction createListenable(onAddFirst, onRemoveLast) {\n    var handlers = [];\n    var addListener = function (fn) {\n        var unique = { fn: fn };\n        handlers.push(unique);\n        if (onAddFirst && handlers.length == 1)\n            onAddFirst();\n        return function () {\n            var idx = handlers.indexOf(unique);\n            if (idx === -1)\n                throw new Error(\"Handler already unsubscribed\");\n            handlers.splice(idx, 1);\n            if (onRemoveLast && handlers.length == 0)\n                onRemoveLast();\n        };\n    };\n    return {\n        listen: addListener,\n        emit: function (value) { return handlers.forEach(function (h) { return h.fn(value); }); },\n    };\n}\n\n\n//# sourceURL=webpack://jel-ts/./src/internal/emitter.ts?");

/***/ }),

/***/ "./src/internal/proxy.ts":
/*!*******************************!*\
  !*** ./src/internal/proxy.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.eventsProxy = exports.attribsProxy = exports.styleProxy = void 0;\nvar emitter_1 = __webpack_require__(/*! ./emitter */ \"./src/internal/emitter.ts\");\nexports.styleProxy = {\n    get: function (getStyle, prop) {\n        return getStyle()[prop];\n    },\n    set: function (getStyle, prop, value) {\n        getStyle()[prop] = value;\n        return true;\n    },\n    apply: function (getStyle, _, _a) {\n        var stylesOrProp = _a[0], value = _a[1];\n        var style = getStyle();\n        if (typeof stylesOrProp == \"object\") {\n            Object.entries(stylesOrProp).forEach(function (_a) {\n                var prop = _a[0], val = _a[1];\n                return style[prop] = val;\n            });\n            return;\n        }\n        style[stylesOrProp] = value;\n    },\n    deleteProperty: function (getStyle, prop) {\n        getStyle()[prop] = null;\n        return true;\n    }\n};\nexports.attribsProxy = {\n    get: function (element, key) {\n        return element.getAttribute(key);\n    },\n    set: function (element, key, value) {\n        element.setAttribute(key, value);\n        return true;\n    },\n    has: function (element, key) {\n        return element.hasAttribute(key);\n    },\n    ownKeys: function (element) {\n        return element.getAttributeNames();\n    },\n};\nexports.eventsProxy = {\n    get: function (element, key) {\n        if (key == \"addEventListener\") {\n            return function (name, handler) { return element.addEventListener(name, handler); };\n        }\n        if (key == \"removeEventListener\") {\n            return function (name, handler) { return element.removeEventListener(name, handler); };\n        }\n        var listen = function (handler) {\n            var wrappedHandler = function (event) { return handler(event); };\n            element.addEventListener(key, wrappedHandler);\n            return function () {\n                element.removeEventListener(key, wrappedHandler);\n            };\n        };\n        return new emitter_1.EventEmitter(listen);\n    }\n};\n\n\n//# sourceURL=webpack://jel-ts/./src/internal/proxy.ts?");

/***/ }),

/***/ "./src/internal/util.ts":
/*!******************************!*\
  !*** ./src/internal/util.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.isContent = exports.entityDataSymbol = void 0;\nexports.isJelEntity = isJelEntity;\nexports.createEntity = createEntity;\nexports.entityDataSymbol = Symbol(\"jelComponentData\");\nvar isContent = function (value) {\n    if (value === undefined)\n        return false;\n    return typeof value == \"string\"\n        || typeof value == \"number\"\n        || !value\n        || value instanceof Element\n        || value instanceof Text\n        || exports.entityDataSymbol in value\n        || (Array.isArray(value) && value.every(exports.isContent));\n};\nexports.isContent = isContent;\nfunction isJelEntity(content) {\n    return typeof content == \"object\" && !!content && exports.entityDataSymbol in content;\n}\nfunction createEntity(content, api) {\n    var _a;\n    if ((0, exports.isContent)(api)) {\n        throw new TypeError(\"API object is already valid content\");\n    }\n    return Object.create(api !== null && api !== void 0 ? api : {}, (_a = {},\n        _a[exports.entityDataSymbol] = {\n            value: {\n                dom: content\n            }\n        },\n        _a));\n}\n;\n\n\n//# sourceURL=webpack://jel-ts/./src/internal/util.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./demo/index.ts");
/******/ 	
/******/ })()
;